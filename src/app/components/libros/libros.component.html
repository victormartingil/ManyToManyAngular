<div class="container m-4">
  <h1>Libros</h1>
  <div class="container row">
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">id</th>
          <th scope="col">Libro</th>
          <th scope="col">Autor</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let libro of libros$ | async">
          <th>Id {{ libro.id }}</th>
          <td>{{ libro.titulo }} </td>
          <td>
            <span *ngFor="let autor of libro.autores" [class.selected]="autor === autor">
              {{autor.nombre + ', '}}
            </span>
          </td>
          <td>
            <button class="btn btn-info mr-3" (click)="edit(libro.id)">
              <i class="icon-pencil icon-large"></i>
            </button>
            <button class="btn btn-danger" (click)="delete(libro.id)">
              <i class="icon-trash icon-large"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="row m-3">
    <form [formGroup]="form" (ngSubmit)="add()">
      <div class="form-group row">
        <label for="titulo" class="text-secondary font-weight-bold ">Título</label>
        <input type="text" class="form-control" formControlName="tituloCtrl" placeholder="Título..." />
      </div>

      <select class="browser-default custom-select form-group row" (change)="selectAutor($event)">
        <option selected>Elija el autor</option>
        <option *ngFor="let autor of autores$ | async" value="{{ autor.id }}">
          {{ autor.nombre }}
        </option>
      </select>

      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Añadir</button>
      </div>
    </form>
  </div>

</div>
